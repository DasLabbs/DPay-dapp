import { useRef } from 'react';

const GalleryIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M16.353 2.00043C19.7299 2.00043 21.9994 4.36229 21.9995 7.88812V16.102C21.9995 16.253 21.9724 16.3886 21.9644 16.5346C21.9594 16.6195 21.9606 16.7046 21.9536 16.7895C21.9496 16.8275 21.9381 16.8628 21.9341 16.9008C21.9011 17.2145 21.8507 17.5144 21.7798 17.8051C21.7618 17.8831 21.7402 17.9586 21.7192 18.0346C21.6393 18.3165 21.5451 18.5853 21.4321 18.8422C21.3992 18.9141 21.3636 18.9832 21.3296 19.0541C21.2076 19.2991 21.0754 19.5344 20.9224 19.7524C20.8754 19.8194 20.8239 19.8798 20.7749 19.9448C20.6159 20.1508 20.4492 20.3478 20.2612 20.5268C20.2003 20.5847 20.1318 20.635 20.0679 20.6899C19.8749 20.8559 19.6774 21.0148 19.4604 21.1508C19.3825 21.1997 19.2962 21.2358 19.2163 21.2797C18.9954 21.4016 18.7726 21.5208 18.5298 21.6127C18.4298 21.6507 18.3184 21.6706 18.2144 21.7036C17.9755 21.7775 17.7397 21.8549 17.4829 21.8989C17.2889 21.9329 17.0775 21.9366 16.8735 21.9536C16.6995 21.9666 16.534 22.0004 16.353 22.0004H7.63721C7.26132 22.0004 6.90208 21.9627 6.55518 21.9057C6.54229 21.9037 6.52998 21.9018 6.51807 21.8998C5.16529 21.6668 4.0423 21.0136 3.25537 20.0287C3.24652 20.0286 3.24671 20.0182 3.23779 20.0092C2.44679 19.0132 1.99951 17.674 1.99951 16.102V7.88812C1.99964 4.3624 4.27047 2.00057 7.63721 2.00043H16.353ZM7.63721 3.39496C5.06048 3.3951 3.39612 5.1624 3.396 7.88812V16.102C3.396 16.8669 3.53782 17.5501 3.78076 18.1411C3.82155 18.0921 5.72942 15.7659 5.75732 15.7348C6.44931 14.9448 7.74866 13.766 9.45361 14.4789C9.86346 14.6489 10.2233 14.8881 10.5532 15.0981C11.1262 15.4811 11.464 15.6613 11.814 15.6313C11.9586 15.6113 12.0944 15.5685 12.2231 15.4887C12.7811 15.1447 14.3586 12.8442 14.4536 12.7192C15.5436 11.2994 17.2236 10.9193 18.6235 11.7592C18.8115 11.8712 20.159 12.8129 20.605 13.1909V7.88812C20.6049 5.1623 18.9389 3.39496 16.353 3.39496H7.63721ZM8.479 6.00043C9.1766 6.00049 9.80876 6.29316 10.2612 6.76117C10.7156 7.21281 11.0005 7.83571 11.0005 8.51508C11.0004 9.86985 9.86659 11.0002 8.50537 11.0004C7.30867 11.0004 6.28776 10.1256 6.05908 8.99359C6.0213 8.82377 6.00049 8.64863 6.00049 8.4682C6.00074 7.10381 7.109 6.00043 8.479 6.00043Z"
      fill="white"
    />
  </svg>
);

interface GalleryButtonProps {
  onFileSelect: (file: File) => void;
}

const GalleryButton = ({ onFileSelect }: GalleryButtonProps) => {
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleClick = () => {
    fileInputRef.current?.click();
  };

  // eslint-disable-next-line no-undef
  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (file) {
      onFileSelect(file);
    }
  };

  return (
    <>
      <input ref={fileInputRef} type="file" accept="image/*" className="hidden" onChange={handleFileChange} />
      <button
        onClick={handleClick}
        className="flex w-full items-center justify-center gap-3 px-6 py-4 font-medium text-white"
      >
        <GalleryIcon />
        <span>Choose from Gallery</span>
      </button>
    </>
  );
};

export default GalleryButton;
